<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sports Events (paste JSON safely)</title>
<style>
  body{font-family:Segoe UI,Arial;background:#0f172a;color:#e2e8f0;margin:0;padding:20px}
.wrap{
  max-width: none;
  width: 100%;
  margin: 0 auto;
}
  
  header{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
  h1{color:#3b82f6;margin:0}
  .controls{margin:14px 0;display:flex;gap:10px;flex-wrap:wrap}
  input,select,button{padding:8px;border-radius:6px;border:1px solid #233044;background:#071026;color:#e2e8f0}
  #events{margin-top:12px}
  .event{background:#111827;padding:12px;border-radius:8px;margin-bottom:10px;cursor:pointer;border:1px solid #1f2937}
  .event .meta{color:#94a3b8;font-size:13px;margin-top:6px}
  .event.active{background:#1f2a44}
  #viewerWrap{margin-top:16px;display:none}
  iframe{width:100%;height:480px;border:0;border-radius:8px}
  .stats{display:flex;gap:12px;margin-left:auto}
  .stat{background:#081225;padding:8px 12px;border-radius:8px;border:1px solid #233044}
  .hint{color:#94a3b8;font-size:13px}
  @media(max-width:720px){ iframe{height:260px} .stats{width:100%;justify-content:space-between} }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Sports Events Stream</h1>
      <div class="stats">
        <div class="stat">Total: <span id="total">0</span></div>
        <div class="stat">Live: <span id="live">0</span></div>
        <div class="stat">Days: <span id="days">0</span></div>
      </div>
    </header>

    <div class="controls">
      <input id="q" placeholder="Search title…" />
      <select id="league"><option value="">All leagues</option></select>
      <select id="status"><option value="">Any status</option><option value="LIVE">LIVE</option><option value="UPCOMING">UPCOMING</option></select>
      <button id="clear">Clear</button>
      <div class="hint">Paste JSON into the <code>&lt;script id="api-data" type="application/json"&gt;</code> block below, then click "Load JSON".</div>
      <button id="load" style="margin-left:auto">Load JSON</button>
    </div>

    <!-- === SAFE PLACE TO PASTE YOUR JSON ===
         Paste your entire JSON response here (exactly as returned).
         Do NOT wrap in quotes or put it inside any other tag.
    -->
    <script id="api-data" type="application/json">
{"meta":{"now_et":"2025-11-16 19:32","now_ts_et":1763339560,"total":48,"returned":48,"live":21,"filter":{"cat":null,"league":null,"hours":8,"group":"day","limit":500,"offset":0},"window_from_et":"2025-11-16 13:00","window_from_ts_et":1763316000,"window_to_et":"2025-11-21 22:30","window_to_ts_et":1763782200},"days":[{"day_et":"2025-11-16","count":25,"items":[{"id":17346,"league":"nfl","title":"Atlanta Falcons - Carolina Panthers","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[252],"streams":[{"hd":252,"link":"https://lotusgamehd.xyz/lotushd.php?hd=252"}]},{"id":17347,"league":"nfl","title":"Buffalo Bills - Tampa Bay Buccaneers","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[254],"streams":[{"hd":254,"link":"https://lotusgamehd.xyz/lotushd.php?hd=254"}]},{"id":17348,"league":"nfl","title":"Tennessee Titans - Houston Texans","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[281],"streams":[{"hd":281,"link":"https://lotusgamehd.xyz/lotushd.php?hd=281"}]},{"id":17349,"league":"nfl","title":"Minnesota Vikings - Chicago Bears","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[271],"streams":[{"hd":271,"link":"https://lotusgamehd.xyz/lotushd.php?hd=271"}]},{"id":17350,"league":"nfl","title":"New York Giants - Green Bay Packers","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[274],"streams":[{"hd":274,"link":"https://lotusgamehd.xyz/lotushd.php?hd=274"}]},{"id":17351,"league":"nfl","title":"Pittsburgh Steelers - Cincinnati Bengals","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[277],"streams":[{"hd":277,"link":"https://lotusgamehd.xyz/lotushd.php?hd=277"}]},{"id":17352,"league":"nfl","title":"Jacksonville Jaguars - Los Angeles Chargers","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[265],"streams":[{"hd":265,"link":"https://lotusgamehd.xyz/lotushd.php?hd=265"}]},{"id":17359,"league":"nfl","title":"NFL Redzone","when_et":"2025-11-16 13:00","ts_et":1763316000,"status":"LIVE","hds":[101],"streams":[{"hd":101,"link":"https://lotusgamehd.xyz/lotushd.php?hd=101"}]},{"id":17491,"league":"nba","title":"Boston Celtics - LA Clippers","when_et":"2025-11-16 15:30","ts_et":1763325000,"status":"LIVE","hds":[502],"streams":[{"hd":502,"link":"https://lotusgamehd.xyz/lotushd.php?hd=502"}]},{"id":17492,"league":"nba","title":"San Antonio Spurs - Sacramento Kings","when_et":"2025-11-16 16:00","ts_et":1763326800,"status":"LIVE","hds":[526],"streams":[{"hd":526,"link":"https://lotusgamehd.xyz/lotushd.php?hd=526"}]},{"id":17353,"league":"nfl","title":"Los Angeles Rams - Seattle Seahawks","when_et":"2025-11-16 16:05","ts_et":1763327100,"status":"LIVE","hds":[269],"streams":[{"hd":269,"link":"https://lotusgamehd.xyz/lotushd.php?hd=269"}]},{"id":17354,"league":"nfl","title":"Arizona Cardinals - San Francisco 49ers","when_et":"2025-11-16 16:05","ts_et":1763327100,"status":"LIVE","hds":[251],"streams":[{"hd":251,"link":"https://lotusgamehd.xyz/lotushd.php?hd=251"}]},{"id":17355,"league":"nfl","title":"Cleveland Browns - Baltimore Ravens","when_et":"2025-11-16 16:25","ts_et":1763328300,"status":"LIVE","hds":[258],"streams":[{"hd":258,"link":"https://lotusgamehd.xyz/lotushd.php?hd=258"}]},{"id":17356,"league":"nfl","title":"Denver Broncos - Kansas City Chiefs","when_et":"2025-11-16 16:25","ts_et":1763328300,"status":"LIVE","hds":[260],"streams":[{"hd":260,"link":"https://lotusgamehd.xyz/lotushd.php?hd=260"}]},{"id":17487,"league":"nhl","title":"Tampa Bay Lightning - Vancouver Canucks","when_et":"2025-11-16 17:00","ts_et":1763330400,"status":"LIVE","hds":[245],"streams":[{"hd":245,"link":"https://lotusgamehd.xyz/lotushd.php?hd=245"}]},{"id":17488,"league":"nhl","title":"Minnesota Wild - Vegas Golden Knights","when_et":"2025-11-16 18:00","ts_et":1763334000,"status":"LIVE","hds":[233],"streams":[{"hd":233,"link":"https://lotusgamehd.xyz/lotushd.php?hd=233"}]},{"id":17493,"league":"nba","title":"Washington Wizards - Brooklyn Nets","when_et":"2025-11-16 18:00","ts_et":1763334000,"status":"LIVE","hds":[529],"streams":[{"hd":529,"link":"https://lotusgamehd.xyz/lotushd.php?hd=529"}]},{"id":17489,"league":"nhl","title":"New York Rangers - Detroit Red Wings","when_et":"2025-11-16 19:00","ts_et":1763337600,"status":"LIVE","hds":[238],"streams":[{"hd":238,"link":"https://lotusgamehd.xyz/lotushd.php?hd=238"}]},{"id":17494,"league":"nba","title":"Houston Rockets - Orlando Magic","when_et":"2025-11-16 19:00","ts_et":1763337600,"status":"LIVE","hds":[532],"streams":[{"hd":532,"link":"https://lotusgamehd.xyz/lotushd.php?hd=532"}]},{"id":17495,"league":"nba","title":"New Orleans Pelicans - Golden State Warriors","when_et":"2025-11-16 19:00","ts_et":1763337600,"status":"LIVE","hds":[518],"streams":[{"hd":518,"link":"https://lotusgamehd.xyz/lotushd.php?hd=518"}]},{"id":17496,"league":"nba","title":"Dallas Mavericks - Portland Trail Blazers","when_et":"2025-11-16 19:30","ts_et":1763339400,"status":"LIVE","hds":[507],"streams":[{"hd":507,"link":"https://lotusgamehd.xyz/lotushd.php?hd=507"}]},{"id":17497,"league":"nba","title":"Phoenix Suns - Atlanta Hawks","when_et":"2025-11-16 20:00","ts_et":1763341200,"status":"UPCOMING","hds":[523],"streams":[{"hd":523,"link":"https://lotusgamehd.xyz/lotushd.php?hd=523"}]},{"id":17498,"league":"nba","title":"Utah Jazz - Chicago Bulls","when_et":"2025-11-16 20:00","ts_et":1763341200,"status":"UPCOMING","hds":[528],"streams":[{"hd":528,"link":"https://lotusgamehd.xyz/lotushd.php?hd=528"}]},{"id":17357,"league":"nfl","title":"Philadelphia Eagles - Detroit Lions","when_et":"2025-11-16 20:20","ts_et":1763342400,"status":"UPCOMING","hds":[276],"streams":[{"hd":276,"link":"https://lotusgamehd.xyz/lotushd.php?hd=276"}]},{"id":17490,"league":"nhl","title":"Colorado Avalanche - New York Islanders","when_et":"2025-11-16 21:00","ts_et":1763344800,"status":"UPCOMING","hds":[226],"streams":[{"hd":226,"link":"https://lotusgamehd.xyz/lotushd.php?hd=226"}]}]},{"day_et":"2025-11-17","count":15,"items":[{"id":17499,"league":"nhl","title":"Boston Bruins - Carolina Hurricanes","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[221],"streams":[{"hd":221,"link":"https://lotusgamehd.xyz/lotushd.php?hd=221"}]},{"id":17500,"league":"nhl","title":"Buffalo Sabres - Edmonton Oilers","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[222],"streams":[{"hd":222,"link":"https://lotusgamehd.xyz/lotushd.php?hd=222"}]},{"id":17501,"league":"nhl","title":"Florida Panthers - Vancouver Canucks","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[231],"streams":[{"hd":231,"link":"https://lotusgamehd.xyz/lotushd.php?hd=231"}]},{"id":17502,"league":"nhl","title":"Washington Capitals - Los Angeles Kings","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[249],"streams":[{"hd":249,"link":"https://lotusgamehd.xyz/lotushd.php?hd=249"}]},{"id":17505,"league":"nba","title":"Cleveland Cavaliers - Milwaukee Bucks","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[506],"streams":[{"hd":506,"link":"https://lotusgamehd.xyz/lotushd.php?hd=506"}]},{"id":17506,"league":"nba","title":"Detroit Pistons - Indiana Pacers","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[530],"streams":[{"hd":530,"link":"https://lotusgamehd.xyz/lotushd.php?hd=530"}]},{"id":17507,"league":"nba","title":"Philadelphia 76ers - LA Clippers","when_et":"2025-11-17 19:00","ts_et":1763424000,"status":"UPCOMING","hds":[522],"streams":[{"hd":522,"link":"https://lotusgamehd.xyz/lotushd.php?hd=522"}]},{"id":17503,"league":"nhl","title":"Columbus Blue Jackets - Montreal Canadiens","when_et":"2025-11-17 19:30","ts_et":1763425800,"status":"UPCOMING","hds":[227],"streams":[{"hd":227,"link":"https://lotusgamehd.xyz/lotushd.php?hd=227"}]},{"id":17508,"league":"nba","title":"Miami Heat - New York Knicks","when_et":"2025-11-17 19:30","ts_et":1763425800,"status":"UPCOMING","hds":[515],"streams":[{"hd":515,"link":"https://lotusgamehd.xyz/lotushd.php?hd=515"}]},{"id":17509,"league":"nba","title":"Toronto Raptors - Charlotte Hornets","when_et":"2025-11-17 19:30","ts_et":1763425800,"status":"UPCOMING","hds":[527],"streams":[{"hd":527,"link":"https://lotusgamehd.xyz/lotushd.php?hd=527"}]},{"id":17510,"league":"nba","title":"Minnesota Timberwolves - Dallas Mavericks","when_et":"2025-11-17 20:00","ts_et":1763427600,"status":"UPCOMING","hds":[517],"streams":[{"hd":517,"link":"https://lotusgamehd.xyz/lotushd.php?hd=517"}]},{"id":17511,"league":"nba","title":"New Orleans Pelicans - Oklahoma City Thunder","when_et":"2025-11-17 20:00","ts_et":1763427600,"status":"UPCOMING","hds":[518],"streams":[{"hd":518,"link":"https://lotusgamehd.xyz/lotushd.php?hd=518"}]},{"id":17358,"league":"nfl","title":"Las Vegas Raiders - Dallas Cowboys","when_et":"2025-11-17 20:15","ts_et":1763428500,"status":"UPCOMING","hds":[267],"streams":[{"hd":267,"link":"https://lotusgamehd.xyz/lotushd.php?hd=267"}]},{"id":17512,"league":"nba","title":"Denver Nuggets - Chicago Bulls","when_et":"2025-11-17 21:00","ts_et":1763431200,"status":"UPCOMING","hds":[508],"streams":[{"hd":508,"link":"https://lotusgamehd.xyz/lotushd.php?hd=508"}]},{"id":17504,"league":"nhl","title":"Anaheim Ducks - Utah Mammoth","when_et":"2025-11-17 22:00","ts_et":1763434800,"status":"UPCOMING","hds":[219],"streams":[{"hd":219,"link":"https://lotusgamehd.xyz/lotushd.php?hd=219"}]}]},{"day_et":"2025-11-18","count":3,"items":[{"id":17513,"league":"ncaaf","title":"Bowling Green Falcons - Akron Zips","when_et":"2025-11-18 19:00","ts_et":1763510400,"status":"UPCOMING","hds":[152],"streams":[{"hd":152,"link":"https://lotusgamehd.xyz/lotushd.php?hd=152"}]},{"id":17514,"league":"ncaaf","title":"Ohio Bobcats - Massachusetts Minutemen","when_et":"2025-11-18 19:00","ts_et":1763510400,"status":"UPCOMING","hds":[140],"streams":[{"hd":140,"link":"https://lotusgamehd.xyz/lotushd.php?hd=140"}]},{"id":17515,"league":"ncaaf","title":"Northern Illinois Huskies - Western Michigan Broncos","when_et":"2025-11-18 19:00","ts_et":1763510400,"status":"UPCOMING","hds":[151],"streams":[{"hd":151,"link":"https://lotusgamehd.xyz/lotushd.php?hd=151"}]}]},{"day_et":"2025-11-19","count":2,"items":[{"id":17516,"league":"ncaaf","title":"Buffalo Bulls - Miami (OH) RedHawks","when_et":"2025-11-19 19:00","ts_et":1763596800,"status":"UPCOMING","hds":[151],"streams":[{"hd":151,"link":"https://lotusgamehd.xyz/lotushd.php?hd=151"}]},{"id":17517,"league":"ncaaf","title":"Kent State Golden Flashes - Central Michigan Chippewas","when_et":"2025-11-19 19:00","ts_et":1763596800,"status":"UPCOMING","hds":[152],"streams":[{"hd":152,"link":"https://lotusgamehd.xyz/lotushd.php?hd=152"}]}]},{"day_et":"2025-11-20","count":1,"items":[{"id":17518,"league":"ncaaf","title":"Arkansas State Red Wolves - Louisiana Ragin' Cajuns","when_et":"2025-11-20 19:30","ts_et":1763685000,"status":"UPCOMING","hds":[150],"streams":[{"hd":150,"link":"https://lotusgamehd.xyz/lotushd.php?hd=150"}]}]},{"day_et":"2025-11-21","count":2,"items":[{"id":17519,"league":"ncaaf","title":"NC State Wolfpack - Florida State Seminoles","when_et":"2025-11-21 20:00","ts_et":1763773200,"status":"UPCOMING","hds":[150],"streams":[{"hd":150,"link":"https://lotusgamehd.xyz/lotushd.php?hd=150"}]},{"id":17520,"league":"ncaaf","title":"UNLV Rebels - Hawai'i Rainbow Warriors","when_et":"2025-11-21 22:30","ts_et":1763782200,"status":"UPCOMING","hds":[143],"streams":[{"hd":143,"link":"https://lotusgamehd.xyz/lotushd.php?hd=143"}]}]}]}    </script>
    <!-- ===================================== -->

    <div style="margin-top:12px">
      <button id="useInline" style="display:none">(debug) load from inline</button>
    </div>

    <div id="events">No data loaded. Paste JSON and click Load JSON.</div>

    <div id="viewerWrap">
      <div style="margin:10px 0;color:#94a3b8">Stream:</div>
      <iframe id="viewer" allow="encrypted-media; picture-in-picture; fullscreen" allowfullscreen style="border:0" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
    </div>
  </div>

<script>
(function(){
  const loadBtn = document.getElementById('load');
  const eventsEl = document.getElementById('events');
  const qEl = document.getElementById('q');
  const leagueEl = document.getElementById('league');
  const statusEl = document.getElementById('status');
  const clearBtn = document.getElementById('clear');
  const totalEl = document.getElementById('total');
  const liveEl = document.getElementById('live');
  const daysEl = document.getElementById('days');
  const viewerWrap = document.getElementById('viewerWrap');
  const viewer = document.getElementById('viewer');
  const apiScript = document.getElementById('api-data');

  let DATA = null;
  let flat = [];

  function parseInlineJSON() {
    const raw = apiScript.textContent.trim();
    if (!raw) throw new Error('No JSON in api-data script tag.');
    return JSON.parse(raw);
  }

  function buildFlat() {
    flat = [];
    if (!DATA || !Array.isArray(DATA.days)) return;
    DATA.days.forEach(day => {
      (day.items || []).forEach(it => {
        // attach day info
        flat.push(Object.assign({}, it, { day_et: day.day_et }));
      });
    });
  }

  function populateLeagueOptions(){
    const set = new Set(flat.map(e => e.league).filter(Boolean));
    // clear existing except first
    while (leagueEl.options.length>1) leagueEl.remove(1);
    Array.from(set).sort().forEach(l => {
      const o = document.createElement('option'); o.value = l; o.textContent = l.toUpperCase();
      leagueEl.appendChild(o);
    });
  }

  function renderList() {
    const q = qEl.value.trim().toLowerCase();
    const lf = leagueEl.value;
    const st = statusEl.value;

    eventsEl.innerHTML = '';
    const filtered = flat.filter(e => {
      if (q && !( (e.title||'').toLowerCase().includes(q) )) return false;
      if (lf && e.league !== lf) return false;
      if (st && ( (e.status||'').toUpperCase() !== st )) return false;
      return true;
    });

    if (!filtered.length) {
      eventsEl.innerHTML = '<div class="hint">No events match that filter.</div>';
      return;
    }

    filtered.forEach(ev => {
      const d = document.createElement('div');
      d.className = 'event';
      d.innerHTML = `<div class="title"><strong>${escapeHtml(ev.title||'Untitled')}</strong></div>
                     <div class="meta">${escapeHtml(ev.league||'-').toUpperCase()} • ${escapeHtml(ev.when_et||ev.day_et||'-')} • <span style="color:#fbbf24">${escapeHtml(ev.status||'-')}</span></div>`;
      d.addEventListener('click', () => {
        selectEvent(d, ev);
      });
      eventsEl.appendChild(d);
    });
  }

  function selectEvent(domNode, ev) {
    // clear active
    document.querySelectorAll('.event').forEach(x=>x.classList.remove('active'));
    domNode.classList.add('active');

    const link = (ev.streams && ev.streams[0] && ev.streams[0].link) || '';
    if (!link) {
      alert('No stream link for that event.');
      return;
    }

    // show viewer and set src (only set when clicked)
    viewerWrap.style.display = 'block';
    viewer.src = link;
    // scroll to viewer on small screens
    viewer.scrollIntoView({behavior:'smooth'});
  }

  function escapeHtml(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  function updateStats() {
    totalEl.textContent = (DATA && DATA.meta && DATA.meta.total) || flat.length;
    liveEl.textContent = (DATA && DATA.meta && DATA.meta.live) || flat.filter(e=> (e.status||'').toUpperCase()==='LIVE').length;
    daysEl.textContent = (DATA && Array.isArray(DATA.days)) ? DATA.days.length : 0;
  }

  loadBtn.addEventListener('click', ()=>{
    try {
      DATA = parseInlineJSON();
    } catch (err) {
      eventsEl.innerHTML = '<div class="hint" style="color:#f87171">Invalid JSON in the &lt;script id="api-data"&gt; block: '+escapeHtml(err.message)+'</div>';
      return;
    }
    buildFlat();
    populateLeagueOptions();
    updateStats();
    renderList();
    // hide viewer until user clicks
    viewerWrap.style.display = 'none';
    viewer.src = '';
  });

  qEl.addEventListener('input', renderList);
  leagueEl.addEventListener('change', renderList);
  statusEl.addEventListener('change', renderList);
  clearBtn.addEventListener('click', ()=>{
    qEl.value = ''; leagueEl.value = ''; statusEl.value = ''; renderList();
  });

  // Optional: allow ctrl+enter to load
  document.addEventListener('keydown', (e)=>{ if (e.ctrlKey && e.key==='Enter') loadBtn.click(); });

  // expose for debug (optional)
  window._debugLoadInline = ()=>{ loadBtn.click(); };
})();
</script>
</body>
</html>
